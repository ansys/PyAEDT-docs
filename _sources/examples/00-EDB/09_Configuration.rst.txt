
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples\00-EDB\09_Configuration.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_00-EDB_09_Configuration.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_00-EDB_09_Configuration.py:


EDB: fully configurable project
-------------------------------
This example shows how you can use create a project using BOM file and configuration files,
run anlasyis and get results.

.. GENERATED FROM PYTHON SOURCE LINES 10-14

Perform required imports
~~~~~~~~~~~~~~~~~~~~~~~~
Peform required imports. Importing the ``Hfss3dlayout`` object initializes it
on version 2022 R2.

.. GENERATED FROM PYTHON SOURCE LINES 14-21

.. code-block:: default


    import os

    from pyaedt import generate_unique_folder_name,examples, Edb, Hfss3dLayout
    from pyaedt.generic.constants import SolverType
    from pyaedt.edb_core.edb_data.simulation_configuration import SimulationConfiguration








.. GENERATED FROM PYTHON SOURCE LINES 22-25

Set non-graphical mode
~~~~~~~~~~~~~~~~~~~~~~
Set non-graphical mode. The default is ``True``.

.. GENERATED FROM PYTHON SOURCE LINES 25-28

.. code-block:: default


    non_graphical = True








.. GENERATED FROM PYTHON SOURCE LINES 29-32

Download file
~~~~~~~~~~~~~
Download the AEDB file and copy it in the temporary folder.

.. GENERATED FROM PYTHON SOURCE LINES 32-38

.. code-block:: default



    project_path = generate_unique_folder_name()
    target_aedb = examples.download_file('edb/Galileo.aedb',destination=project_path)
    print("Project folder will be", target_aedb)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Project folder will be D:\Temp\pyaedt_prj_5Q3\edb/Galileo.aedb




.. GENERATED FROM PYTHON SOURCE LINES 39-42

Launch EDB
~~~~~~~~~~
Launch the :class:`pyaedt.Edb` class, using EDB 2022 R2 and SI units.

.. GENERATED FROM PYTHON SOURCE LINES 42-44

.. code-block:: default


    edbapp = Edb(target_aedb, edbversion="2022.2")







.. GENERATED FROM PYTHON SOURCE LINES 45-51

Import Definitions
~~~~~~~~~~~~~~~~~~
A definitions file is a json containing, for each part name the model associated.
Model can be RLC, Sparameter or Spice.
Once imported the definition is applied to the board.
Json file is stored for convenience in aedb folder.

.. GENERATED FROM PYTHON SOURCE LINES 51-54

.. code-block:: default


    edbapp.core_components.import_definition(os.path.join(target_aedb, "1_comp_definition.json"))





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 55-61

Import BOM
~~~~~~~~~~
This steps import a bom csv file containg, reference designator,
part name, component type and default value.
Components not in BOM will be deactivated.
Csv file is store for convenience in aedb folder.

.. GENERATED FROM PYTHON SOURCE LINES 61-70

.. code-block:: default


    edbapp.core_components.import_bom(os.path.join(target_aedb,"0_bom.csv"),
                                      refdes_col=0,
                                      part_name_col=1,
                                      comp_type_col=2,
                                      value_col=3)







.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 71-73

Check Component Values
~~~~~~~~~~~~~~~~~~~~~~

.. GENERATED FROM PYTHON SOURCE LINES 73-77

.. code-block:: default


    comp = edbapp.core_components.components["C3B14"]
    comp.model_type, comp.value





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    ('RLC', 1.1000000000000001e-09)



.. GENERATED FROM PYTHON SOURCE LINES 78-80

Check Component Values
~~~~~~~~~~~~~~~~~~~~~~

.. GENERATED FROM PYTHON SOURCE LINES 80-83

.. code-block:: default

    comp2 = edbapp.core_components.components["C3A3"]
    comp2.model_type, comp2.value





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    ('RLC', 2e-07)



.. GENERATED FROM PYTHON SOURCE LINES 84-86

Check Component Definition
~~~~~~~~~~~~~~~~~~~~~~~~~~

.. GENERATED FROM PYTHON SOURCE LINES 86-89

.. code-block:: default


    edbapp.core_components.nport_comp_definition





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    {'602433-026': <pyaedt.edb_core.edb_data.components_data.EDBComponentDef object at 0x000001FD9C3430A0>}



.. GENERATED FROM PYTHON SOURCE LINES 90-92

Save Edb
~~~~~~~~

.. GENERATED FROM PYTHON SOURCE LINES 92-94

.. code-block:: default

    edbapp.save_edb()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 95-102

Configure Setup
~~~~~~~~~~~~~~~
This step allows to define the project. It includes:
 - Definition of nets to be included into the cutout
 - Cutout details
 - Components on which to create the ports
 - Simulation settings

.. GENERATED FROM PYTHON SOURCE LINES 102-115

.. code-block:: default


    sim_setup = edbapp.new_simulation_configuration()
    sim_setup.solver_type = SolverType.SiwaveSYZ
    sim_setup.batch_solve_settings.cutout_subdesign_expansion = 0.01
    sim_setup.batch_solve_settings.do_cutout_subdesign = True
    sim_setup.batch_solve_settings.signal_nets = ["PCIE0_RX0_P", "PCIE0_RX0_N", "PCIE0_TX0_P_C", "PCIE0_TX0_N_C",
                                                  "PCIE0_TX0_P", "PCIE0_TX0_N"]
    sim_setup.batch_solve_settings.components = ["U2A5", "J2L1"]
    sim_setup.batch_solve_settings.power_nets = ["GND"]
    sim_setup.ac_settings.start_freq = "100Hz"
    sim_setup.ac_settings.stop_freq = "6GHz"
    sim_setup.ac_settings.step_freq = "10MHz"








.. GENERATED FROM PYTHON SOURCE LINES 116-119

Run Setup
~~~~~~~~~
This step allows to create the cutout and apply all settings.

.. GENERATED FROM PYTHON SOURCE LINES 119-123

.. code-block:: default


    sim_setup.export_json(os.path.join(project_path, "configuration.json"))
    edbapp.build_simulation_project(sim_setup)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 124-127

Plot Cutout
~~~~~~~~~~~
Plot cutout once finished.

.. GENERATED FROM PYTHON SOURCE LINES 127-130

.. code-block:: default


    edbapp.core_nets.plot(None,None)




.. image-sg:: /examples/00-EDB/images/sphx_glr_09_Configuration_001.png
   :alt: Galileo_um_cutout
   :srcset: /examples/00-EDB/images/sphx_glr_09_Configuration_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 131-134

Save and Close EDB
~~~~~~~~~~~~~~~~~~
Edb will be saved and closed in order to be opened by Hfss 3D Layout and solved.

.. GENERATED FROM PYTHON SOURCE LINES 134-138

.. code-block:: default


    edbapp.save_edb()
    edbapp.close_edb()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 139-142

Open Aedt
~~~~~~~~~
Project folder aedb will be opened in AEDT Hfss3DLayout and loaded.

.. GENERATED FROM PYTHON SOURCE LINES 142-144

.. code-block:: default

    h3d = Hfss3dLayout(specified_version="2022.2", projectname=target_aedb, non_graphical=non_graphical)








.. GENERATED FROM PYTHON SOURCE LINES 145-148

Analyze
~~~~~~~
Project will be solved.

.. GENERATED FROM PYTHON SOURCE LINES 148-150

.. code-block:: default

    h3d.analyze_nominal()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 151-154

Get Results
~~~~~~~~~~~
S Parameter data will be loaded at the end of simulation.

.. GENERATED FROM PYTHON SOURCE LINES 154-156

.. code-block:: default

    solutions = h3d.post.get_solution_data()








.. GENERATED FROM PYTHON SOURCE LINES 157-160

Plot Results
~~~~~~~~~~~~
Plot S Parameter data.

.. GENERATED FROM PYTHON SOURCE LINES 160-162

.. code-block:: default

    solutions.plot(solutions.expressions, "db20")




.. image-sg:: /examples/00-EDB/images/sphx_glr_09_Configuration_002.png
   :alt: Simulation Results Plot
   :srcset: /examples/00-EDB/images/sphx_glr_09_Configuration_002.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    <Figure size 2000x1000 with 1 Axes>



.. GENERATED FROM PYTHON SOURCE LINES 163-166

Save and Close AEDT
~~~~~~~~~~~~~~~~~~~
Hfss3dLayout is saved and closed.

.. GENERATED FROM PYTHON SOURCE LINES 166-168

.. code-block:: default

    h3d.save_project()
    h3d.release_desktop()




.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    True




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 2 minutes  20.976 seconds)


.. _sphx_glr_download_examples_00-EDB_09_Configuration.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 09_Configuration.py <09_Configuration.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 09_Configuration.ipynb <09_Configuration.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
